## 前言

2011 年 Node.js 的诞生是 JavaScript 的里程碑，不仅使服务器端的 JavaScript 成为可能，也让前端开发进入了一个全新的时代。

强大和愈趋完善的工具链，使得开发者在考虑架构的时候越来越愿意把逻辑放到前端去处理和渲染，甚至达到前后端分离。

这时，以 jQuery 和 Backbone.js 为首的 MVC 设计模式让前端开发者逐渐陷入凌乱之中，由于随着前端处理的业务逻辑所占的比重越来越大，前端需要管理的状态（state）和需要处理的数据（data）会越来越多。

所幸的是，先驱者们机智地把 MVVM 设计模式引入到了 JavaScript 中，通过数据绑定（data binding），使前端开发者能有效地逃离大量的 DOM 操作，从而专注于业务逻辑和状态变化本身。

典型的 MVVM 框架/库 有 [Knockout](http://knockoutjs.com/)， Google 出品的 [AngularJS](https://angularjs.org/)、从苹果公司内部脱离出来的 [EmberJS](http://emberjs.com/)、国内开发者司徒正美开发的 [Avalon](https://avalonjs.github.io/)，还有同样是国内开发者尤小右的 [Vue.js](http://vuejs.org)

## MVVM

MVVM 是 Model-View-ViewModel 的简称，顾名思义，ViewModel 实际上把 View 和 Model 联系在一起，当 Model 发生变化的时候，会通过双向数据绑定，把变化反映到 View 中。

ViewModel 极大地提高了开发的效率，因为双向绑定远远地降低了开发者手动管理 DOM State 的必要性。在这里可以举一个非常简单的例子：

```html
<img src="foo.png" id="pic"/>
<button onclick="hide()">click me</button>

<script>
  var hide = function(){
    document.querySelector('#pic').style.display = 'none'; // 核心操作
  }
</script>
```

以上是用原生 JavaScript DOM 操作实现的点击按钮隐藏一张图片，下面是 Vue.js 实现：

```html
<img src="foo.png" id="pic", v-show="isShow"/>
<button @click="hide">click me</button>

<script>
  var app = new Vue({
    data: {
      isShow: true
    },
    methods: {
      hide: function(){
        this.isShow = false; // 核心操作
      }
    }
  })
</script>
```

这样看上去，好像用原生 DOM 实现的代码量要比用框架少得多，当然了，如果整一个网站只需要实现几个像这样的功能，手写 DOM 也未尝不可，使用框架或库反而就成了画蛇添足。但是，在大多的情况下，在我们开发稍微复杂一点的网站时，DOM 操作就远远不止这样了。

因此，这两个实现之间的区别，并非体现在代码量上，而是整个开发思维的变化。对比两个实现的核心操作，前者的思路是拿到 DOM，然后根据需求（这里的图片的隐藏）再去操作、修改 DOM。而后者则是通过 v-show 指令 (directive) 绑定数据 isShow，开发者只需要**决定元素是否显示**，DOM 操作交给 Vue.js 去处理。

这个转变意义重大，毕竟人脑总是疲于记住和操作太多的 state 和 DOM.

